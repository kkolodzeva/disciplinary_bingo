<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–æ–µ –±–∏–Ω–≥–æ</title>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f2f2f2;
    text-align: center;
    padding: 30px;
}

h1 { margin-bottom: 40px; }

.boards {
    display: flex;
    justify-content: center;
    gap: 80px;
    flex-wrap: wrap;
}

.board {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.grid {
    display: grid;
    grid-template-columns: repeat(3, 120px);
    grid-template-rows: repeat(3, 120px);
    gap: 10px;
    margin-top: 15px;
}

.cell {
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 14px;
    cursor: pointer;
    border-radius: 10px;
    transition: 0.3s;
    user-select: none;
    padding: 8px;
    text-align: center;
}

.lisa .cell { background-color: #8B0000; }
.katya .cell { background-color: #006B3C; }

.cell.active {
    opacity: 0.4;
    transform: scale(0.95);
}

.bingo {
    margin-top: 10px;
    font-weight: bold;
    font-size: 18px;
    color: green;
    display: none;
}

button {
    margin-top: 15px;
    padding: 8px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}
</style>
</head>

<body>

<h1>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–æ–µ –±–∏–Ω–≥–æ</h1>

<div class="boards">

<div class="board lisa">
<h2>–õ–∏–∑–∞</h2>
<div class="grid" id="lisaGrid"></div>
<div class="bingo" id="lisaBingo">–ë–ò–ù–ì–û üéâ</div>
<button onclick="resetBoard('lisa')">–°–±—Ä–æ—Å</button>
</div>

<div class="board katya">
<h2>–ö–∞—Ç—è</h2>
<div class="grid" id="katyaGrid"></div>
<div class="bingo" id="katyaBingo">–ë–ò–ù–ì–û üéâ</div>
<button onclick="resetBoard('katya')">–°–±—Ä–æ—Å</button>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAW9t8w6e32djmNP6FWDTa91Z6KJGEtw9c",
  authDomain: "disciplinary-bingo.firebaseapp.com",
  projectId: "disciplinary-bingo",
  storageBucket: "disciplinary-bingo.firebasestorage.app",
  messagingSenderId: "267561003164",
  appId: "1:267561003164:web:164e7ee671780b8ca9a559",
  databaseURL: "https://disciplinary-bingo-default-rtdb.europe-west1.firebasedatabase.app" 
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const lisaTasks = [
"10–∫ —à–∞–≥–æ–≤","–û—Ç–±–æ–π –¥–æ 00:00","30 –º–∏–Ω—É—Ç —Å—Ç–µ–ø–ø–µ—Ä / –∑–∞—Ä—è–¥–∫–∞",
"8/16","30 –º–∏–Ω—É—Ç –ª—é–±–æ–π —É—á—ë–±—ã","30 –º–∏–Ω—É—Ç —É–±–æ—Ä–∫–∏",
"–ù–µ –±–æ–ª–µ–µ 30 –º–∏–Ω—É—Ç –Ω–∞ –∏–Ω—Å—Ç—É –∏ 60 –º–∏–Ω—É—Ç –Ω–∞ —é—Ç—É–±",
"–ü–æ–ª–Ω—ã–π –≤–µ—á–µ—Ä–Ω–∏–π —É—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º","–ó–∞–Ω—è—Ç–∏–µ —Å –ö–æ—Ä–∂–∏–∫–æ–º"
];

const katyaTasks = [
"–ü—Ä–æ–≥—É–ª–∫–∞ –Ω–µ –º–µ–Ω–µ–µ 20 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å","–ó–∞—Ä—è–¥–∫–∞ –¥–ª—è —à–µ–∏","–°–æ–Ω 8 —á–∞—Å–æ–≤",
"–ê–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞","–£–±–æ—Ä–∫–∞ –æ–¥–Ω–æ–π –∑–æ–Ω—ã","10 –º–∏–Ω—É—Ç —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏—è",
"30 –º–∏–Ω—É—Ç —á—Ç–µ–Ω–∏—è","–û–¥–Ω–∞ –≤—ã–±—Ä–æ—à–µ–Ω–Ω–∞—è –≤–µ—â—å –≤ –Ω–µ–¥–µ–ª—é",
"–û–¥–Ω–æ –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ / –º–∞—Ä—à—Ä—É—Ç –≤ –Ω–µ–¥–µ–ª—é"
];

function createBoard(name, tasks) {
    const grid = document.getElementById(name + "Grid");

    tasks.forEach((task, index) => {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.innerText = task;
        cell.onclick = () => toggleCell(name, index);
        grid.appendChild(cell);
    });

    const boardRef = ref(db, name);
    onValue(boardRef, (snapshot) => {
        const data = snapshot.val() || [];
        updateBoard(name, data);
    });
}

function toggleCell(name, index) {
    const boardRef = ref(db, name);
    onValue(boardRef, (snapshot) => {
        let data = snapshot.val() || [];
        if (data.includes(index)) {
            data = data.filter(i => i !== index);
        } else {
            data.push(index);
        }
        set(boardRef, data);
    }, { onlyOnce: true });
}

function updateBoard(name, state) {
    const cells = document.querySelectorAll("#" + name + "Grid .cell");
    cells.forEach((cell, index) => {
        if (state.includes(index)) {
            cell.classList.add("active");
        } else {
            cell.classList.remove("active");
        }
    });
    checkBingo(name, state);
}

function checkBingo(name, state) {
    const wins = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
    ];

    const bingoElement = document.getElementById(name + "Bingo");
    const hasBingo = wins.some(combo =>
        combo.every(index => state.includes(index))
    );

    bingoElement.style.display = hasBingo ? "block" : "none";
}

function resetBoard(name) {
    set(ref(db, name), []);
}

createBoard("lisa", lisaTasks);
createBoard("katya", katyaTasks);

</script>

</body>
</html>
